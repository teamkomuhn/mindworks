var Mailcheck={domainThreshold:2,secondLevelThreshold:2,topLevelThreshold:2,defaultDomains:["msn.com","bellsouth.net","telus.net","comcast.net","optusnet.com.au","earthlink.net","qq.com","sky.com","icloud.com","mac.com","sympatico.ca","googlemail.com","att.net","xtra.co.nz","web.de","cox.net","gmail.com","ymail.com","aim.com","rogers.com","verizon.net","rocketmail.com","google.com","optonline.net","sbcglobal.net","aol.com","me.com","btinternet.com","charter.net","shaw.ca"],defaultSecondLevelDomains:["yahoo","hotmail","mail","live","outlook","gmx"],defaultTopLevelDomains:["com","com.au","com.tw","co","ca","co.nz","co.uk","de","fr","it","ru","net","org","edu","gov","jp","nl","kr","se","eu","ie","co.il","us","at","be","dk","hk","es","gr","ch","no","cz","in","net","net.au","info","biz","mil","co.jp","sg","hu","hn","uk"],run:function(e){e.domains=e.domains||Mailcheck.defaultDomains,e.secondLevelDomains=e.secondLevelDomains||Mailcheck.defaultSecondLevelDomains,e.topLevelDomains=e.topLevelDomains||Mailcheck.defaultTopLevelDomains,e.distanceFunction=e.distanceFunction||Mailcheck.sift4Distance;var n=function(e){return e},o=e.suggested||n,a=e.empty||n,t=Mailcheck.suggest(Mailcheck.encodeEmail(e.email),e.domains,e.secondLevelDomains,e.topLevelDomains,e.distanceFunction);return t?o(t):a()},suggest:function(e,n,o,a,t){e=e.toLowerCase();var i=this.splitEmail(e);if(o&&a&&-1!==o.indexOf(i.secondLevelDomain)&&-1!==a.indexOf(i.topLevelDomain))return!1;var l=this.findClosestDomain(i.domain,n,t,this.domainThreshold);if(l)return l!=i.domain&&{address:i.address,domain:l,full:i.address+"@"+l};var c=this.findClosestDomain(i.secondLevelDomain,o,t,this.secondLevelThreshold),r=this.findClosestDomain(i.topLevelDomain,a,t,this.topLevelThreshold);if(i.domain){l=i.domain;var s=!1;if(c&&c!=i.secondLevelDomain&&(l=l.replace(i.secondLevelDomain,c),s=!0),r&&r!=i.topLevelDomain&&""!==i.secondLevelDomain&&(l=l.replace(new RegExp(i.topLevelDomain+"$"),r),s=!0),s)return{address:i.address,domain:l,full:i.address+"@"+l}}return!1},findClosestDomain:function(e,n,o,a){var t;a=a||this.topLevelThreshold;var i=1/0,l=null;if(!e||!n)return!1;o||(o=this.sift4Distance);for(var c=0;c<n.length;c++){if(e===n[c])return e;(t=o(e,n[c]))<i&&(i=t,l=n[c])}return i<=a&&null!==l&&l},sift4Distance:function(e,n,o){if(void 0===o&&(o=5),!e||!e.length)return n?n.length:0;if(!n||!n.length)return e.length;for(var a=e.length,t=n.length,i=0,l=0,c=0,r=0,s=0,m=[];i<a&&l<t;){if(e.charAt(i)==n.charAt(l)){r++;for(var d=!1,u=0;u<m.length;){var h=m[u];if(i<=h.c1||l<=h.c2){(d=Math.abs(l-i)>=Math.abs(h.c2-h.c1))?s++:h.trans||(h.trans=!0,s++);break}i>h.c2&&l>h.c1?m.splice(u,1):u++}m.push({c1:i,c2:l,trans:d})}else{c+=r,r=0,i!=l&&(i=l=Math.min(i,l));for(var f=0;f<o&&(i+f<a||l+f<t);f++){if(i+f<a&&e.charAt(i+f)==n.charAt(l)){i+=f-1,l--;break}if(l+f<t&&e.charAt(i)==n.charAt(l+f)){i--,l+=f-1;break}}}l++,(++i>=a||l>=t)&&(c+=r,r=0,i=l=Math.min(i,l))}return c+=r,Math.round(Math.max(a,t)-c+s)},splitEmail:function(e){var n=(e=null!==e?e.replace(/^\s*/,"").replace(/\s*$/,""):null).split("@");if(n.length<2)return!1;for(var o=0;o<n.length;o++)if(""===n[o])return!1;var a=n.pop(),t=a.split("."),i="",l="";if(0===t.length)return!1;if(1==t.length)l=t[0];else{i=t[0];for(var c=1;c<t.length;c++)l+=t[c]+".";l=l.substring(0,l.length-1)}return{topLevelDomain:l,secondLevelDomain:i,domain:a,address:n.join("@")}},encodeEmail:function(e){var n=encodeURI(e);return n=n.replace("%20"," ").replace("%25","%").replace("%5E","^").replace("%60","`").replace("%7B","{").replace("%7C","|").replace("%7D","}")}};"undefined"!=typeof module&&module.exports&&(module.exports=Mailcheck),"function"==typeof define&&define.amd&&define("mailcheck",[],(function(){return Mailcheck})),"undefined"!=typeof window&&window.jQuery&&(jQuery.fn.mailcheck=function(e){var n=this;if(e.suggested){var o=e.suggested;e.suggested=function(e){o(n,e)}}if(e.empty){var a=e.empty;e.empty=function(){a.call(null,n)}}e.email=this.val(),Mailcheck.run(e)});